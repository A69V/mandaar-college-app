<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Match Results</title>
    <style>
        :root{
            --bg:#0f1724; --card:#0b1220; --muted:#9aa6b2; --accent:#06b6d4; --glass: rgba(255,255,255,0.04);
            --radius:14px; --pad:16px; --shadow: 0 6px 24px rgba(2,6,23,0.6);
            font-family: Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
        }
        *{box-sizing:border-box}
        html,body{margin:0;background:linear-gradient(180deg,#071026 0%, #071422 100%);color:#e6eef6; min-height:100%;}
        .wrap{max-width:800px;margin:40px auto;padding:20px}
        .card{background:linear-gradient(180deg,var(--card), rgba(10,16,26,0.9));border-radius:var(--radius);padding:var(--pad);box-shadow:var(--shadow); margin-bottom: 20px;}
        h1, h2 { color: var(--accent); margin-top: 0; }
        #result-summary { font-size: 24px; font-weight: 700; text-align: center; }
        
        table.stats{width:100%;border-collapse:collapse;font-size:15px; margin-bottom: 20px;}
        table.stats th, table.stats td{padding:10px;text-align:left;border-bottom:1px solid var(--glass)}
        table.stats th{font-size:12px;color:var(--muted);text-transform:uppercase;letter-spacing:0.5px}
        table.stats td{font-weight:600}
        table.stats .stat-num{text-align:right;font-family:monospace;font-size:16px;width:50px}
    </style>
     <style>
        :root{
            --bg:#0f1724; --card:#0b1220; --muted:#9aa6b2; --accent:#06b6d4; --glass: rgba(255,255,255,0.04);
            --radius:14px; --pad:16px; --shadow: 0 6px 24px rgba(2,6,23,0.6);
            font-family: Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
        }
        *{box-sizing:border-box}
        html,body{height:100%;margin:0;background:linear-gradient(180deg,#071026 0%, #071422 100%);color:#e6eef6}
        
        /* --- NEW LAYOUT & SIDEBAR STYLES --- */
        body {
            display: flex;
            height: 100vh; /* Full viewport height */
        }
        .sidebar {
            width: 240px;
            flex-shrink: 0;
            background: var(--card);
            border-right: 1px solid var(--glass);
            height: 100vh;
            overflow-y: auto;
            position: sticky;
            top: 0;
        }
        .sidebar-header {
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid var(--glass);
        }
        .sidebar-header h3 {
            margin: 0;
            font-size: 22px;
            color: var(--accent);
        }
        .sidebar ul {
            list-style: none;
            padding: 15px 0;
            margin: 0;
        }
        .sidebar li a {
            display: block;
            padding: 14px 24px;
            text-decoration: none;
            color: var(--muted);
            font-weight: 600;
            font-size: 16px;
            transition: all 0.2s ease;
            border-left: 3px solid transparent;
        }
        .sidebar li a:hover {
            background: var(--glass);
            color: #fff;
            border-left-color: var(--accent);
        }
        .main-content {
            flex-grow: 1;
            overflow-y: auto;
            height: 100vh;
        }
        /* --- END NEW STYLES --- */

        .wrap{max-width:1000px;margin:40px auto;padding:20px}
        h1 { text-align: center; color: var(--accent); }
        .sport-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
        }
        .sport-card {
            background:linear-gradient(180deg,var(--card), rgba(10,16,26,0.9));
            border-radius:var(--radius);
            padding: var(--pad);
            box-shadow:var(--shadow);
            text-decoration: none;
            color: inherit;
            transition: all 0.2s ease;
            text-align: center;
            font-size: 20px;
            font-weight: 600;
            padding: 40px 20px;
        }
        .sport-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(2,6,23,0.8);
            border: 1px solid var(--accent);
        }
    </style>
    <link rel="stylesheet" href="responsive.css">
</head>
<body>
     <nav class="sidebar">
        <div class="sidebar-header">
            <h3>Mandaar Sports</h3>
        </div>
        <ul>
            <li><a href="index.html">üè† Home</a></li>
            <li><a href="sport.html?sport=cricket">üèè Cricket</a></li>
            <li><a href="sport.html?sport=football">‚öΩ Football</a></li>
            <li><a href="sport.html?sport=badminton">üè∏ Badminton</a></li>
            <li><a href="sport.html?sport=tabletennis">üèì Table Tennis</a></li>
            <li><a href="sport.html?sport=volleyball">üèê Volleyball</a></li>
            <li><a href="sport.html?sport=kabaddi">üèÉ‚Äç‚ôÇÔ∏è Kabaddi</a></li>
            <li><a href="sport.html?sport=shotput">üèãÔ∏è Shot Put</a></li>
            <li><a href="sport.html?sport=javelin">üèπ Javelin</a></li>
            <li><a href="sport.html?sport=chess">‚ôüÔ∏è Chess</a></li>
            <li><a href="sport.html?sport=carrom">üéØ Carrom</a></li>
            <li><a href="sport.html?sport=athletics">üëü Athletics</a></li>
        </ul>
    </nav>
    <div class="wrap">
        <h1 id="match-title">Loading Match Result...</h1>

        <div class="card">
            <h2 id="result-summary">...</h2>
        </div>
        
        <div class="card" id="team-a-card">
            <h2 id="team-a-name">Team A</h2>
            <h3>Batting</h3>
            <table class="stats" id="team-a-batting"></table>
            <h3>Bowling</h3>
            <table class="stats" id="team-a-bowling"></table>
        </div>
        
        <div class="card" id="team-b-card">
            <h2 id="team-b-name">Team B</h2>
            <h3>Batting</h3>
            <table class="stats" id="team-b-batting"></table>
            <h3>Bowling</h3>
            <table class="stats" id="team-b-bowling"></table>
        </div>

    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
        import { getDatabase, ref, get } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-database.js";

        // === PASTE YOUR FIREBASE CONFIG HERE ===
        const firebaseConfig = {
            apiKey: "AIzaSyAOtc2UrW2hXO4JJK5ZZQcDOfUVbEFmnis",
            authDomain: "umang-mandar.firebaseapp.com",
            projectId: "umang-mandar",
            storageBucket: "umang-mandar.firebasestorage.app",
            messagingSenderId: "1033556658773",
            appId: "1:1033556658773:web:ed5c606f77e792136ae2dc",
            databaseURL: "https://umang-mandar-default-rtdb.asia-southeast1.firebasedatabase.app/" 
        };
        // === END OF CONFIG ===

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // --- LOAD MATCH DATA ---
        window.addEventListener('DOMContentLoaded', async () => {
            const urlParams = new URLSearchParams(window.location.search);
            const matchId = urlParams.get('matchId');
            
            if (!matchId) {
                document.getElementById('match-title').textContent = "Error: No Match ID provided.";
                return;
            }

            const matchRef = ref(db, `matches/${matchId}`);
            const snapshot = await get(matchRef);
            
            if (!snapshot.exists()) {
                document.getElementById('match-title').textContent = `Error: Match ${matchId} not found.`;
                return;
            }
            
            const state = snapshot.val();
            
            document.getElementById('match-title').textContent = `${state.teamA.name} vs ${state.teamB.name}`;
            document.getElementById('result-summary').textContent = state.result || "Match details loaded.";
            
            document.getElementById('team-a-name').textContent = state.teamA.name;
            document.getElementById('team-b-name').textContent = state.teamB.name;
            
            // Render Scorecards
            renderBattingTable(state.scorecard.teamA.batting, 'team-a-batting');
            renderBowlingTable(state.scorecard.teamA.bowling, 'team-a-bowling');
            renderBattingTable(state.scorecard.teamB.batting, 'team-b-batting');
            renderBowlingTable(state.scorecard.teamB.bowling, 'team-b-bowling');
        });

        function renderBattingTable(battingData, tableId) {
            const table = document.getElementById(tableId);
            table.innerHTML = `
                <tr>
                    <th>Batsman</th> <th>Dismissal</th>
                    <th class="stat-num">R</th> <th class="stat-num">B</th>
                    <th class="stat-num">4s</th> <th class="stat-num">6s</th>
                    <th class="stat-num">SR</th>
                </tr>
            `;
            battingData.forEach(p => {
                const sr = (p.balls > 0) ? (p.runs / p.balls * 100).toFixed(2) : '0.00';
                table.innerHTML += `
                    <tr>
                        <td>${p.name}</td> <td>${p.dismissal || 'not out'}</td>
                        <td class="stat-num">${p.runs}</td> <td class="stat-num">${p.balls}</td>
                        <td class="stat-num">${p.fours}</td> <td class="stat-num">${p.sixes}</td>
                        <td class="stat-num">${sr}</td>
                    </tr>
                `;
            });
        }
        
        function renderBowlingTable(bowlingData, tableId) {
            const table = document.getElementById(tableId);
            table.innerHTML = `
                <tr>
                    <th>Bowler</th>
                    <th class="stat-num">O</th> <th class="stat-num">M</th>
                    <th class="stat-num">R</th> <th class="stat-num">W</th>
                    <th class="stat-num">Econ</th>
                </tr>
            `;
            bowlingData.forEach(p => {
                const totalBalls = p.overs * 6 + p.balls;
                const econ = (totalBalls > 0) ? (p.runs / totalBalls * 6).toFixed(2) : '0.00';
                table.innerHTML += `
                    <tr>
                        <td>${p.name}</td>
                        <td class="stat-num">${p.overs}.${p.balls}</td> <td class="stat-num">${p.maidens}</td>
                        <td class="stat-num">${p.runs}</td> <td class="stat-num">${p.wickets}</td>
                        <td class="stat-num">${econ}</td>
                    </tr>
                `;
            });
        }

    </script>
    <script>
        // --- NEW: Responsive Navigation Logic ---
    const sidebar = document.getElementById('sidebar');
    const menuToggle = document.getElementById('menu-toggle');
    const mainContent = document.querySelector('.main-content'); // Assuming only one
    const overlay = document.getElementById('overlay');
    const backLink = document.getElementById('back-link');
    const bottomNavBack = document.getElementById('bottom-nav-back');
    const pageTitleEl = document.getElementById('page-main-title'); // Get title element

    // Function to get current sport from URL
    const getCurrentSport = () => {
        const params = new URLSearchParams(window.location.search);
        return params.get('sport') || 'cricket'; // Default if needed
    };
    const currentSport = getCurrentSport();

    // Set Back Button links dynamically
    const sportHubUrl = `sport.html?sport=${currentSport}`;
    if (backLink) {
        // Show back button only if NOT on sport.html
        if (!window.location.pathname.endsWith('sport.html')) {
             backLink.href = sportHubUrl;
             backLink.style.display = 'inline-block';
        }
    }
    if(bottomNavBack){
        bottomNavBack.href = sportHubUrl;
    }

     // Set Page Title Dynamically for sport.html
     if (pageTitleEl && window.location.pathname.endsWith('sport.html')) {
        pageTitleEl.textContent = currentSport.charAt(0).toUpperCase() + currentSport.slice(1) + " Details";
     } else if (pageTitleEl && window.location.pathname.endsWith('setup-cricket.html')){
         pageTitleEl.textContent = "Setup Cricket Match";
     } else if (pageTitleEl && window.location.pathname.endsWith('cricket-scorer.html')){
         pageTitleEl.textContent = "Cricket Scorer";
     } else if (pageTitleEl && window.location.pathname.endsWith('results.html')){
         pageTitleEl.textContent = "Match Results";
     }


    // Sidebar Toggle Logic
    if (menuToggle && sidebar && mainContent) {
        menuToggle.addEventListener('click', () => {
            const isMobile = window.innerWidth <= 768;
            if (isMobile) {
                sidebar.classList.toggle('open');
                overlay.classList.toggle('active', sidebar.classList.contains('open')); // Toggle overlay with sidebar
            } else {
                sidebar.classList.toggle('collapsed');
                mainContent.classList.toggle('expanded', sidebar.classList.contains('collapsed'));
                // Optional: Save state to localStorage
                localStorage.setItem('sidebarCollapsed', sidebar.classList.contains('collapsed'));
            }
        });
    }

     // Overlay click to close sidebar on mobile
    if (overlay) {
        overlay.addEventListener('click', () => {
            if (sidebar.classList.contains('open')) {
                sidebar.classList.remove('open');
                overlay.classList.remove('active');
            }
        });
    }


    // Optional: Restore sidebar state on desktop load
    if (window.innerWidth > 768) {
         const sidebarCollapsed = localStorage.getItem('sidebarCollapsed') === 'true';
         if (sidebarCollapsed) {
             sidebar?.classList.add('collapsed');
             mainContent?.classList.add('expanded');
         }
    }
    // --- END Responsive Navigation Logic ---
    </script>
<div class="overlay" id="overlay"></div>
<nav class="bottom-nav">
    <ul>
        <li>
            <a href="index.html">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
                Home
            </a>
        </li>
        <li>
            <a href="./sport.html?sport=cricket" id="bottom-nav-back">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.67 3.87L9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"/></svg>

                Go Back
            </a>
        </li>
        </ul>
</nav>
</body>
</html>